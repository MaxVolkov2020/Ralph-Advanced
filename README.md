# Ralph-Advanced

**Multi-Project Autonomous AI Development Orchestrator**

Ralph-Advanced is a microservices-based system that enables autonomous software development using specialized AI agents. It supports multiple projects running simultaneously, with separate agents for backend (Laravel), mobile (React Native), quality assurance, code review, and security scanning.

## Features

- ✅ **Multi-Project Support** - Run multiple projects simultaneously
- ✅ **Specialized AI Agents** - Backend, Mobile, QA, Code Review, Security
- ✅ **Quality Pipeline** - Multi-stage validation before commits
- ✅ **Real-Time Monitoring** - Web-based dashboard with live updates
- ✅ **Authentication** - Secure login system
- ✅ **Docker Deployment** - Easy deployment with Docker Compose
- ✅ **Proxmox Support** - Automated LXC container deployment
- ✅ **Task Queue** - Redis-based distributed task processing
- ✅ **Git Integration** - Automatic commits and branch management

## Architecture

```
┌─────────────────┐
│   Web UI        │ (React + TypeScript + TailwindCSS)
│   (Port 80)     │
└────────┬────────┘
         │
┌────────▼────────┐
│  Orchestrator   │ (FastAPI + SQLAlchemy)
│  (Port 8000)    │
└────────┬────────┘
         │
    ┌────▼────┐
    │  Redis  │ (Task Queue)
    └────┬────┘
         │
    ┌────▼────────────────────────┐
    │      Worker Pools           │
    ├─────────────────────────────┤
    │ Backend │ Mobile │ QA       │
    │ Review  │ Security          │
    └───────────────────────────────┘
```

## Quick Start

### Prerequisites

- Docker and Docker Compose
- Git
- API key for Manus or Claude

### Installation

1. **Clone the repository**

```bash
git clone https://github.com/yourusername/Ralph-Advanced.git
cd Ralph-Advanced
```

2. **Configure environment**

```bash
cp .env.example .env
nano .env
```

Edit `.env` and add your API keys:

```env
API_PROVIDER=manus
MANUS_API_KEY=your_manus_api_key_here
```

3. **Build and start services**

```bash
docker-compose build
docker-compose up -d
```

4. **Access the UI**

Open your browser and navigate to:
```
http://localhost
```

Login with default credentials:
- **Username**: `Admin`
- **Password**: `123Test@2026!`

## Proxmox Deployment

For deployment to a Proxmox LXC container:

```bash
cd deployment
sudo ./deploy-proxmox.sh 100
```

This will:
1. Create an LXC container (ID 100)
2. Install Docker and Docker Compose
3. Copy Ralph-Advanced files
4. Build and start all services

## Project Structure

```
Ralph-Advanced/
├── orchestrator/          # FastAPI backend
│   ├── main.py           # API endpoints
│   ├── models.py         # Database models
│   ├── auth.py           # Authentication
│   └── schemas.py        # Pydantic schemas
├── workers/              # Worker processes
│   ├── workers.py        # Story processing logic
│   ├── agent_invoker.py  # AI agent API calls
│   ├── task_queue.py     # Redis queue management
│   └── git_manager.py    # Git operations
├── ui/                   # React frontend
│   ├── src/
│   │   ├── pages/        # Page components
│   │   ├── components/   # Reusable components
│   │   ├── api/          # API client
│   │   └── store/        # Zustand state management
│   └── package.json
├── agents/               # Agent prompts
│   ├── pm/
│   ├── backend/
│   ├── mobile/
│   ├── qa/
│   ├── code_review/
│   └── security/
├── config/               # Configuration files
├── deployment/           # Deployment scripts
└── docker-compose.yml    # Docker Compose configuration
```

## Usage

### Creating a Project

1. Log in to the web UI
2. Navigate to "Projects"
3. Click "New Project"
4. Fill in project details:
   - Name
   - Description
   - Backend repository URL
   - Mobile repository URL
5. Click "Create Project"

### Creating a Feature

1. Select a project
2. Click "New Feature"
3. Provide:
   - Feature name
   - Description
   - Branch name
   - PRD JSON (generated by PM agent)
4. Click "Start Feature"

The system will automatically:
- Clone repositories
- Create feature branch
- Process stories sequentially
- Run quality gates
- Commit changes
- Update progress

### Monitoring Progress

The dashboard shows:
- Active projects and features
- Story status (Pending, In Progress, Review, Testing, Done)
- Real-time agent activity logs
- Git commit timeline
- Quality gate results

## API Endpoints

### Authentication

- `POST /api/auth/login` - Login
- `GET /api/auth/me` - Get current user

### Projects

- `GET /api/projects` - List projects
- `POST /api/projects` - Create project
- `GET /api/projects/{id}` - Get project
- `PUT /api/projects/{id}` - Update project
- `DELETE /api/projects/{id}` - Delete project

### Features

- `GET /api/features` - List features
- `POST /api/features` - Create feature
- `GET /api/features/{id}` - Get feature
- `POST /api/features/{id}/start` - Start feature
- `POST /api/features/{id}/pause` - Pause feature

### Stories

- `GET /api/stories` - List stories
- `GET /api/stories/{id}` - Get story

### Dashboard

- `GET /api/dashboard/stats` - Get dashboard statistics
- `GET /api/features/{id}/stats` - Get feature statistics

### Logs

- `GET /api/logs/system` - Get system logs
- `GET /api/logs/progress/{feature_id}` - Get progress logs

### WebSocket

- `WS /ws` - Real-time updates

## Configuration

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `API_PROVIDER` | AI provider (manus or claude) | `manus` |
| `MANUS_API_KEY` | Manus API key | - |
| `CLAUDE_API_KEY` | Claude API key | - |
| `DATABASE_URL` | Database connection string | `sqlite:///./ralph_advanced.db` |
| `REDIS_HOST` | Redis host | `redis` |
| `REDIS_PORT` | Redis port | `6379` |
| `SECRET_KEY` | JWT secret key | (change in production) |

### Database

By default, Ralph-Advanced uses SQLite. For production, PostgreSQL is recommended:

```yaml
# Uncomment in docker-compose.yml
postgres:
  image: postgres:15-alpine
  environment:
    POSTGRES_DB: ralph_advanced
    POSTGRES_USER: ralph
    POSTGRES_PASSWORD: ralph_password
```

Then update `DATABASE_URL`:

```env
DATABASE_URL=postgresql://ralph:ralph_password@postgres:5432/ralph_advanced
```

## Agent Prompts

Agent prompts are located in the `agents/` directory. Each agent has a `prompt.md` file that defines its behavior.

To customize an agent:

1. Edit `agents/{agent_name}/prompt.md`
2. Restart the worker: `docker-compose restart worker-{agent_name}`

## Troubleshooting

### View Logs

```bash
# All services
docker-compose logs -f

# Specific service
docker-compose logs -f orchestrator
docker-compose logs -f worker-backend
```

### Restart Services

```bash
# All services
docker-compose restart

# Specific service
docker-compose restart orchestrator
```

### Reset Database

```bash
docker-compose down -v
docker-compose up -d
```

### Check Worker Status

```bash
docker-compose ps
```

## Development

### Running Locally

**Orchestrator:**

```bash
cd orchestrator
pip install -r requirements.txt
uvicorn main:app --reload
```

**Worker:**

```bash
cd workers
pip install -r requirements.txt
python start_worker.py all
```

**UI:**

```bash
cd ui
npm install
npm run dev
```

### Running Tests

```bash
# Backend tests
cd orchestrator
pytest

# Frontend tests
cd ui
npm test
```

## Security

- Change the default admin password immediately
- Update `SECRET_KEY` in production
- Use HTTPS in production
- Restrict access to Redis and database ports
- Use strong passwords for database
- Keep API keys secure and never commit them to Git

## Performance

### Scaling Workers

To add more workers for parallel processing:

```yaml
# In docker-compose.yml
worker-backend-2:
  build:
    context: ./workers
  command: python start_worker.py backend
  # ... same configuration as worker-backend
```

### Resource Limits

Adjust container resources based on your needs:

```yaml
services:
  orchestrator:
    deploy:
      resources:
        limits:
          cpus: '2'
          memory: 2G
```

## License

MIT License - See LICENSE file for details

## Support

For issues and questions:
- GitHub Issues: https://github.com/yourusername/Ralph-Advanced/issues
- Documentation: https://github.com/yourusername/Ralph-Advanced/wiki

## Credits

Built with:
- FastAPI
- React
- Redis
- Docker
- Anthropic Claude / Manus AI
